{
  "version": 3,
  "sources": ["../../@vaadin/flow-frontend/FlowBootstrap.js"],
  "sourcesContent": ["/* This is a copy of the regular `BootstrapHandler.js` in the flow-server\r\n   module, but with the following modifications:\r\n   - The main function is exported as an ES module for lazy initialization.\r\n   - Application configuration is passed as a parameter instead of using\r\n     replacement placeholders as in the regular bootstrapping.\r\n   - It reuses `Vaadin.Flow.clients` if exists.\r\n   - Fixed lint errors.\r\n */\r\nconst init = function (appInitResponse) {\r\n  window.Vaadin = window.Vaadin || {};\r\n  window.Vaadin.Flow = window.Vaadin.Flow || {};\r\n\r\n  var apps = {};\r\n  var widgetsets = {};\r\n\r\n  var log;\r\n  if (typeof window.console === undefined || !window.location.search.match(/[&?]debug(&|$)/)) {\r\n    /* If no console.log present, just use a no-op */\r\n    log = function () {};\r\n  } else if (typeof window.console.log === 'function') {\r\n    /* If it's a function, use it with apply */\r\n    log = function () {\r\n      window.console.log.apply(window.console, arguments);\r\n    };\r\n  } else {\r\n    /* In IE, its a native function for which apply is not defined, but it works\r\n     without a proper 'this' reference */\r\n    log = window.console.log;\r\n  }\r\n\r\n  var isInitializedInDom = function (appId) {\r\n    var appDiv = document.getElementById(appId);\r\n    if (!appDiv) {\r\n      return false;\r\n    }\r\n    for (var i = 0; i < appDiv.childElementCount; i++) {\r\n      var className = appDiv.childNodes[i].className;\r\n      /* If the app div contains a child with the class\r\n      'v-app-loading' we have only received the HTML\r\n      but not yet started the widget set\r\n      (UIConnector removes the v-app-loading div). */\r\n      if (className && className.indexOf('v-app-loading') != -1) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  /*\r\n   * Needed for Testbench compatibility, but prevents any Vaadin 7 app from\r\n   * bootstrapping unless the legacy vaadinBootstrap.js file is loaded before\r\n   * this script.\r\n   */\r\n  window.Vaadin = window.Vaadin || {};\r\n  window.Vaadin.Flow = window.Vaadin.Flow || {};\r\n\r\n  /*\r\n   * Needed for wrapping custom javascript functionality in the components (i.e. connectors)\r\n   */\r\n  window.Vaadin.Flow.tryCatchWrapper = function (originalFunction, component) {\r\n    return function () {\r\n      try {\r\n        // eslint-disable-next-line\r\n        const result = originalFunction.apply(this, arguments);\r\n        return result;\r\n      } catch (error) {\r\n        console.error(\r\n          `There seems to be an error in ${component}:\r\n${error.message}\r\nPlease submit an issue to https://github.com/vaadin/flow-components/issues/new/choose`\r\n        );\r\n      }\r\n    };\r\n  };\r\n\r\n  if (!window.Vaadin.Flow.initApplication) {\r\n    window.Vaadin.Flow.clients = window.Vaadin.Flow.clients || {};\r\n\r\n    window.Vaadin.Flow.initApplication = function (appId, config) {\r\n      var testbenchId = appId.replace(/-\\d+$/, '');\r\n\r\n      if (apps[appId]) {\r\n        if (\r\n          window.Vaadin &&\r\n          window.Vaadin.Flow &&\r\n          window.Vaadin.Flow.clients &&\r\n          window.Vaadin.Flow.clients[testbenchId] &&\r\n          window.Vaadin.Flow.clients[testbenchId].initializing\r\n        ) {\r\n          throw new Error('Application ' + appId + ' is already being initialized');\r\n        }\r\n        if (isInitializedInDom(appId)) {\r\n          throw new Error('Application ' + appId + ' already initialized');\r\n        }\r\n      }\r\n\r\n      log('init application', appId, config);\r\n\r\n      window.Vaadin.Flow.clients[testbenchId] = {\r\n        isActive: function () {\r\n          return true;\r\n        },\r\n        initializing: true,\r\n        productionMode: mode\r\n      };\r\n\r\n      var getConfig = function (name) {\r\n        var value = config[name];\r\n        return value;\r\n      };\r\n\r\n      /* Export public data */\r\n      var app = {\r\n        getConfig: getConfig\r\n      };\r\n      apps[appId] = app;\r\n\r\n      if (!window.name) {\r\n        window.name = appId + '-' + Math.random();\r\n      }\r\n\r\n      var widgetset = 'client';\r\n      widgetsets[widgetset] = {\r\n        pendingApps: []\r\n      };\r\n      if (widgetsets[widgetset].callback) {\r\n        log('Starting from bootstrap', appId);\r\n        widgetsets[widgetset].callback(appId);\r\n      } else {\r\n        log('Setting pending startup', appId);\r\n        widgetsets[widgetset].pendingApps.push(appId);\r\n      }\r\n\r\n      return app;\r\n    };\r\n    window.Vaadin.Flow.getAppIds = function () {\r\n      var ids = [];\r\n      for (var id in apps) {\r\n        if (Object.prototype.hasOwnProperty.call(apps, id)) {\r\n          ids.push(id);\r\n        }\r\n      }\r\n      return ids;\r\n    };\r\n    window.Vaadin.Flow.getApp = function (appId) {\r\n      return apps[appId];\r\n    };\r\n    window.Vaadin.Flow.registerWidgetset = function (widgetset, callback) {\r\n      log('Widgetset registered', widgetset);\r\n      var ws = widgetsets[widgetset];\r\n      if (ws && ws.pendingApps) {\r\n        ws.callback = callback;\r\n        for (var i = 0; i < ws.pendingApps.length; i++) {\r\n          var appId = ws.pendingApps[i];\r\n          log('Starting from register widgetset', appId);\r\n          callback(appId);\r\n        }\r\n        ws.pendingApps = null;\r\n      }\r\n    };\r\n    window.Vaadin.Flow.getBrowserDetailsParameters = function () {\r\n      var params = {};\r\n\r\n      /* Screen height and width */\r\n      params['v-sh'] = window.screen.height;\r\n      params['v-sw'] = window.screen.width;\r\n      /* Browser window dimensions */\r\n      params['v-wh'] = window.innerHeight;\r\n      params['v-ww'] = window.innerWidth;\r\n      /* Body element dimensions */\r\n      params['v-bh'] = document.body.clientHeight;\r\n      params['v-bw'] = document.body.clientWidth;\r\n\r\n      /* Current time */\r\n      var date = new Date();\r\n      params['v-curdate'] = date.getTime();\r\n\r\n      /* Current timezone offset (including DST shift) */\r\n      var tzo1 = date.getTimezoneOffset();\r\n\r\n      /* Compare the current tz offset with the first offset from the end\r\n         of the year that differs --- if less that, we are in DST, otherwise\r\n         we are in normal time */\r\n      var dstDiff = 0;\r\n      var rawTzo = tzo1;\r\n      for (var m = 12; m > 0; m--) {\r\n        date.setUTCMonth(m);\r\n        var tzo2 = date.getTimezoneOffset();\r\n        if (tzo1 != tzo2) {\r\n          dstDiff = tzo1 > tzo2 ? tzo1 - tzo2 : tzo2 - tzo1;\r\n          rawTzo = tzo1 > tzo2 ? tzo1 : tzo2;\r\n          break;\r\n        }\r\n      }\r\n\r\n      /* Time zone offset */\r\n      params['v-tzo'] = tzo1;\r\n\r\n      /* DST difference */\r\n      params['v-dstd'] = dstDiff;\r\n\r\n      /* Time zone offset without DST */\r\n      params['v-rtzo'] = rawTzo;\r\n\r\n      /* DST in effect? */\r\n      params['v-dston'] = tzo1 != rawTzo;\r\n\r\n      /* Time zone id (if available) */\r\n      try {\r\n        params['v-tzid'] = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n      } catch (err) {\r\n        params['v-tzid'] = '';\r\n      }\r\n\r\n      /* Window name */\r\n      if (window.name) {\r\n        params['v-wn'] = window.name;\r\n      }\r\n\r\n      /* Detect touch device support */\r\n      var supportsTouch = false;\r\n      try {\r\n        document.createEvent('TouchEvent');\r\n        supportsTouch = true;\r\n      } catch (e) {\r\n        /* Chrome and IE10 touch detection */\r\n        supportsTouch = 'ontouchstart' in window || typeof navigator.msMaxTouchPoints !== 'undefined';\r\n      }\r\n      params['v-td'] = supportsTouch;\r\n\r\n      /* Device Pixel Ratio */\r\n      params['v-pr'] = window.devicePixelRatio;\r\n\r\n      if (navigator.platform) {\r\n        params['v-np'] = navigator.platform;\r\n      }\r\n\r\n      /* Stringify each value (they are parsed on the server side) */\r\n      Object.keys(params).forEach(function (key) {\r\n        var value = params[key];\r\n        if (typeof value !== 'undefined') {\r\n          params[key] = value.toString();\r\n        }\r\n      });\r\n      return params;\r\n    };\r\n  }\r\n\r\n  log('Flow bootstrap loaded');\r\n  if (appInitResponse.appConfig.productionMode && typeof window.__gwtStatsEvent != 'function') {\r\n    window.Vaadin.Flow.gwtStatsEvents = [];\r\n    window.__gwtStatsEvent = function (event) {\r\n      window.Vaadin.Flow.gwtStatsEvents.push(event);\r\n      return true;\r\n    };\r\n  }\r\n  var config = appInitResponse.appConfig;\r\n  var mode = appInitResponse.appConfig.productionMode;\r\n  window.Vaadin.Flow.initApplication(config.appId, config);\r\n};\r\n\r\nexport { init };\r\n"],
  "mappings": "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",
  "names": ["config"]
}
